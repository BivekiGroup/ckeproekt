# Настройка целей Яндекс.Метрики

## Счетчик установлен
ID счетчика: **53877577**

## Включенные функции
- ✅ Карта кликов (clickmap)
- ✅ Отслеживание ссылок (trackLinks)
- ✅ Точный показатель отказов (accurateTrackBounce)
- ✅ Вебвизор (webvisor) - запись поведения пользователей

## Цели в Яндекс.Метрике

### 1. Высокоприоритетные цели (₽300-500)

#### Удачно отправленная заявка ОБРАТНЫЙ ЗВОНОК
- **Название:** callback_success
- **Тип:** JavaScript событие
- **Идентификатор:** callback_success
- **Цена:** ₽300-500

#### Удачно отправленная заявка БЕСПЛАТНАЯ КОНСУЛЬТАЦИЯ
- **Название:** consultation_success
- **Тип:** JavaScript событие
- **Идентификатор:** consultation_success
- **Цена:** ₽300-500

#### Форма контактов
- **Название:** contact_form_success
- **Тип:** JavaScript событие
- **Идентификатор:** contact_form_success
- **Цена:** ₽200-400

### 2. Среднеприоритетные цели (₽100-200)

#### Клик по кнопке БЕСПЛАТНАЯ КОНСУЛЬТАЦИЯ
- **Название:** consultation_click
- **Тип:** JavaScript событие
- **Идентификатор:** consultation_click
- **Цена:** ₽100-200

#### Клик по кнопке ОБРАТНЫЙ ЗВОНОК
- **Название:** callback_click
- **Тип:** JavaScript событие
- **Идентификатор:** callback_click
- **Цена:** ₽100-200

#### Клик по кнопке УЗНАТЬ СТОИМОСТЬ
- **Название:** price_click
- **Тип:** JavaScript событие
- **Идентификатор:** price_click
- **Цена:** ₽80-150

### 3. Низкоприоритетные цели (₽50-100)

#### Клик по телефону
- **Название:** phone_click
- **Тип:** JavaScript событие
- **Идентификатор:** phone_click
- **Цена:** ₽50-100

#### Клик по email
- **Название:** email_click
- **Тип:** JavaScript событие
- **Идентификатор:** email_click
- **Цена:** ₽50-100

### 4. Дополнительные микроконверсии (₽20-100)

#### Просмотр страницы услуг (>30 сек)
- **Название:** services_view
- **Тип:** JavaScript событие
- **Идентификатор:** services_view
- **Цена:** ₽30-50

#### Просмотр кейсов/портфолио
- **Название:** portfolio_view
- **Тип:** JavaScript событие
- **Идентификатор:** portfolio_view
- **Цена:** ₽40-80

#### Скролл страницы >50%
- **Название:** scroll_50
- **Тип:** JavaScript событие
- **Идентификатор:** scroll_50
- **Цена:** ₽20-30

#### Время на сайте >2 мин
- **Название:** engagement_2min
- **Тип:** JavaScript событие
- **Идентификатор:** engagement_2min
- **Цена:** ₽50-100

#### Просмотр >3 страниц
- **Название:** multi_page_view
- **Тип:** JavaScript событие
- **Идентификатор:** multi_page_view
- **Цена:** ₽80-150

## Как использовать в коде

### Импорт функции
```typescript
import { reachGoal } from '@/app/components/YandexMetrika';
```

### Примеры использования

#### 1. Отправка заявки обратного звонка
```typescript
const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault();

  // Клик по кнопке
  reachGoal('callback_click');

  // ... отправка формы

  if (success) {
    // Успешная отправка
    reachGoal('callback_success', { phone: phone });
  }
};
```

#### 2. Клик по кнопке консультации
```typescript
const handleConsultationClick = () => {
  reachGoal('consultation_click');
  // ... открытие модального окна
};
```

#### 3. Клик по телефону
```typescript
<a
  href="tel:+79168305858"
  onClick={() => reachGoal('phone_click')}
>
  +7 (916) 830-58-58
</a>
```

#### 4. Клик по email
```typescript
<a
  href="mailto:info@ckeproekt.ru"
  onClick={() => reachGoal('email_click')}
>
  info@ckeproekt.ru
</a>
```

#### 5. Отслеживание скролла
```typescript
useEffect(() => {
  const handleScroll = () => {
    const scrollPercentage = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;

    if (scrollPercentage > 50 && !scrollGoalSent) {
      reachGoal('scroll_50');
      setScrollGoalSent(true);
    }
  };

  window.addEventListener('scroll', handleScroll);
  return () => window.removeEventListener('scroll', handleScroll);
}, []);
```

#### 6. Отслеживание времени на сайте
```typescript
useEffect(() => {
  const timer = setTimeout(() => {
    reachGoal('engagement_2min');
  }, 120000); // 2 минуты

  return () => clearTimeout(timer);
}, []);
```

## Настройка целей в интерфейсе Яндекс.Метрики

1. Зайдите в https://metrika.yandex.ru
2. Выберите счетчик **53877577 (ckeproekt.ru)**
3. Перейдите в раздел **Настройки → Цели**
4. Нажмите **Добавить цель**
5. Для каждой цели:
   - Выберите тип: **JavaScript событие**
   - Введите идентификатор из списка выше
   - Укажите название
   - Сохраните

## Проверка работы целей

### В консоли браузера
```javascript
// Проверить наличие счетчика
console.log(window.ym);

// Отправить тестовую цель
ym(53877577, 'reachGoal', 'test_goal');
```

### В режиме реального времени
1. Откройте https://metrika.yandex.ru
2. Перейдите в **Отчеты → В режиме реального времени**
3. Выполните действие на сайте
4. Проверьте, что событие отобразилось в отчете

## Рекомендации по бюджету

### Текущий бюджет: ₽1,500/неделю (₽6,000/месяц)
- Ожидаемо: 2-3 заявки в месяц
- **Слишком мало для оптимизации**

### Минимальный рекомендуемый: ₽15,000-25,000/месяц
- Ожидаемо: 5-10 заявок в месяц
- Достаточно данных для начальной оптимизации

### Оптимальный: ₽40,000-60,000/месяц
- Ожидаемо: 15-25 заявок в месяц
- Стабильный поток лидов
- Возможность A/B тестирования

## Полезные отчеты

1. **Конверсии → Цели** - общая статистика по всем целям
2. **Источники → Сводка** - откуда приходят конвертирующие посетители
3. **Отчеты → Вебвизор** - записи сессий пользователей
4. **Поведение → Карта кликов** - где кликают пользователи
